{"ast":null,"code":"export const fetchGameStats = () => {\n  const defaultStats = {\n    'NOVICE': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'EASY': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'MEDIUM': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'HARD': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'EXTREME': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'INSANE': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    }\n  };\n  let stats;\n  if (localStorage.getItem('mineMasterStats')) {\n    // @ts-ignore\n    stats = JSON.parse(localStorage.getItem('mineMasterStats'));\n  } else {\n    localStorage.setItem('mineMasterStats', JSON.stringify(defaultStats));\n    stats = defaultStats;\n  }\n  return stats;\n};\nexport const updateGameStats = (dificultyLevel, currentGameStats) => {\n  const stats = fetchGameStats();\n  const currentStats = stats[dificultyLevel];\n  currentStats.gamesPlayed++;\n  currentGameStats.gameWon ? currentStats.wins++ : currentStats.losses++;\n  currentStats.winPercentage = currentStats.wins / currentStats.gamesPlayed * 100;\n  currentStats.bestTime = currentStats.bestTime === '' ? currentGameStats.gameTime : findSmallerTime(currentStats.bestTime, currentGameStats.gameTime);\n  currentStats.averageTime = calculateAvgTime(currentStats.gamesPlayed, currentStats.averageTime, currentGameStats.gameTime);\n  stats[dificultyLevel] = currentStats;\n  localStorage.setItem('mineMasterStats', JSON.stringify(stats));\n};\nconst findSmallerTime = (time1, time2) => {\n  return calculateSecondCount(time1) > calculateSecondCount(time2) ? time2 : time1;\n};\nconst calculateAvgTime = (gamesPlayed, averageTime, newTime) => {\n  if (averageTime === '') return newTime;\n  const avgSeconds = averageTime === '' ? 0 : calculateSecondCount(averageTime);\n  const newSeconds = calculateSecondCount(newTime);\n  console.log(avgSeconds, newSeconds);\n  const newAverageSeconds = gamesPlayed === 1 ? (avgSeconds * gamesPlayed + newSeconds) / gamesPlayed : (avgSeconds * (gamesPlayed - 1) + newSeconds) / gamesPlayed;\n  return `${Math.floor(newAverageSeconds / 60) < 60 ? 0 : Math.floor(Math.floor(newAverageSeconds / 60) / 60)} : ${Math.floor(newAverageSeconds / 60) % 60} : ${Math.abs(newAverageSeconds % 60)}`;\n};\nconst calculateSecondCount = time => {\n  const splitTime = time.split(' : ');\n  return parseInt(splitTime[0]) * 3600 + parseInt(splitTime[1]) * 60 + parseInt(splitTime[0]);\n};","map":{"version":3,"names":["fetchGameStats","defaultStats","gamesPlayed","wins","losses","bestTime","averageTime","winPercentage","stats","localStorage","getItem","JSON","parse","setItem","stringify","updateGameStats","dificultyLevel","currentGameStats","currentStats","gameWon","gameTime","findSmallerTime","calculateAvgTime","time1","time2","calculateSecondCount","newTime","avgSeconds","newSeconds","console","log","newAverageSeconds","Math","floor","abs","time","splitTime","split","parseInt"],"sources":["/Users/anubhavkhanna/Desktop/Code Repos/MineMaster/src/utils/localStorage.ts"],"sourcesContent":["interface gameStats {\n  gamesPlayed: number\n  wins: number\n  losses: number\n  bestTime: string\n  averageTime: string\n  winPercentage: number\n}\n\ninterface gameStatus {\n  gameTime: string\n  gameWon: boolean\n}\n\nexport const fetchGameStats = () => {\n  const defaultStats = {\n    'NOVICE': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'EASY': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'MEDIUM': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'HARD': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'EXTREME': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    },\n    'INSANE': {\n      gamesPlayed: 0,\n      wins: 0,\n      losses: 0,\n      bestTime: '',\n      averageTime: '',\n      winPercentage: 0\n    }\n  }\n\n  let stats;\n  if (localStorage.getItem('mineMasterStats')) {\n    // @ts-ignore\n    stats = JSON.parse(localStorage.getItem('mineMasterStats'))\n  } else {\n    localStorage.setItem('mineMasterStats', JSON.stringify(defaultStats))\n    stats = defaultStats;\n  }\n  return stats;\n}\n\nexport const updateGameStats = (dificultyLevel: string, currentGameStats: gameStatus) => {\n  const stats = fetchGameStats();\n  const currentStats = stats[dificultyLevel];\n  currentStats.gamesPlayed++;\n  currentGameStats.gameWon ? currentStats.wins ++ : currentStats.losses++;\n  currentStats.winPercentage = (currentStats.wins/currentStats.gamesPlayed) * 100;\n  currentStats.bestTime = currentStats.bestTime === '' ? currentGameStats.gameTime : findSmallerTime(currentStats.bestTime, currentGameStats.gameTime);\n  currentStats.averageTime = calculateAvgTime(currentStats.gamesPlayed, currentStats.averageTime, currentGameStats.gameTime);\n\n  stats[dificultyLevel] = currentStats;\n  localStorage.setItem('mineMasterStats', JSON.stringify(stats))\n}\n\nconst findSmallerTime = (time1: string, time2: string) => {\n  return calculateSecondCount(time1) > calculateSecondCount(time2) ? time2 : time1;\n}\n\nconst calculateAvgTime = (gamesPlayed: number, averageTime: string, newTime: string) => {\n  if (averageTime === '') return newTime;\n  const avgSeconds = averageTime === '' ? 0 : calculateSecondCount(averageTime);\n  const newSeconds = calculateSecondCount(newTime);\n  console.log(avgSeconds, newSeconds)\n  const newAverageSeconds = gamesPlayed === 1 ? ((avgSeconds * (gamesPlayed)) + newSeconds)/gamesPlayed : ((avgSeconds * (gamesPlayed -1)) + newSeconds)/gamesPlayed;\n  return `${Math.floor(newAverageSeconds/60) < 60 ? 0 : Math.floor(Math.floor(newAverageSeconds/60)/60)} : ${(Math.floor(newAverageSeconds/60))%60} : ${Math.abs(newAverageSeconds%60)}`\n}\n\nconst calculateSecondCount = (time: string) => {\n  const splitTime = time.split(' : ')\n  return parseInt(splitTime[0]) * 3600 + parseInt(splitTime[1]) * 60 + parseInt(splitTime[0])\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}